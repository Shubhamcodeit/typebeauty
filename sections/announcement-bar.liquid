{%- if section.settings.bar_show -%}
  {%- if section.settings.bar_show_on_homepage == false
    or template == 'index'
    and section.settings.bar_show_on_homepage
  -%}
    <announcement-bar>
      <div class="announce-outer">
        {% for block in section.blocks %}
          <div>
            <a class="announcement" href="{{ block.settings.bar_link | escape }}">
              <div class="announcement">
                <span class="announcement__text">{{ block.settings.bar_message | escape }}</span>
              </div>
            </a>
          </div>
        {% endfor %}
        {% comment %}

                     <div>
              <div class="announcement" >
                <div class="announcement">
                 <span class="announcement__text"><a href="" onclick="Calendly.initPopupWidget({url: 'https://calendly.com/typebeautyinc/virtual-beauty-consultation'});return false;">Book a Free Virtual Beauty Consultation now</a></span>
               </div>
          </div>
                     </div>
        {% endcomment %}
      </div>
    </announcement-bar>

    {%- if section.settings.bar_show_dismiss -%}
      <span class="announcement__exit" tabindex="0">
        <span class="visually-hidden">{{ 'general.accessibility_labels.close' | t }}</span>
        {%- render 'theme-symbols', icon: 'close' -%}
      </span>
    {%- endif -%}

    {% style %}
       {%- if section.settings.bar_txtcolor != 'rgba(0,0,0,0)' -%}
         .announcement {
           color: {{ section.settings.bar_txtcolor }};
         }
         .announcement__exit path {
           fill: {{ section.settings.bar_txtcolor }};
         }
      {% endif %}
       {%- if section.settings.bar_show_dismiss -%}
         .announcement {
           padding-right: 50px;
         }
       {%- endif -%}
    {% endstyle %}

    <script>
      var ad = localStorage.getItem('announcement-dismissed');
      if ( ad != 'true' ) {
        document.querySelector('body').classList.add('show-announcement-bar');
      }
    </script>
  {%- endif -%}
{%- endif -%}

{% schema %}
{
  "name": "t:sections.announcement-bar.name",
  "class": "mount-announcement",
  "settings": [
     {
        "type": "checkbox",
        "id": "bar_show",
        "label": "t:sections.announcement-bar.settings.bar_show.label",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "bar_show_on_homepage",
        "label": "t:sections.announcement-bar.settings.bar_show_on_homepage.label",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "bar_show_dismiss",
        "label": "t:sections.announcement-bar.settings.bar_show_dismiss.label",
        "default": true
      },

      {
        "type": "color",
        "id": "bar_bgcolor",
        "label": "t:sections.announcement-bar.settings.bar_bgcolor.label",
        "default": "#111111"
      },
      {
        "type": "color",
        "id": "bar_txtcolor",
        "label": "t:sections.announcement-bar.settings.bar_txtcolor.label",
        "default": "#ffffff"
      }
  ],
  "blocks": [
     {
       "name": "Announcement",
       "type": "slide",
       "settings": [
         {
        "type": "text",
        "id": "bar_message",
        "label": "t:sections.announcement-bar.settings.bar_message.label",
        "default": "Use this bar for a short, important announcement."
      },
      {
        "type": "url",
        "id": "bar_link",
        "label": "t:sections.announcement-bar.settings.bar_link.label"
      }
       ]
     }
   ]
}
{% endschema %}
<script>
  $('.announce-outer').slick({
    slidesToShow: 1,
   arrows: false,
     autoplay: true,
    autoplaySpeed: 2000,
    slidesToScroll: 1
  });
</script>
<style>
  #shopify-section-announcement-bar .slick-slider{
  position: absolute!important;
    top: 0!important;
    width: 100%;
  }
  #shopify-section-announcement-bar .slick-list{
  height: 42px!important;
    display: block!important;
  }
  .announce-outer{
   background: {{ section.settings.bar_bgcolor }};
  }
</style>
