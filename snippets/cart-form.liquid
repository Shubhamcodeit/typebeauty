<cart-form id="AjaxCartForm">

<p class="giftstext"></p>
  <span class="site-cart-heading sidebar__caption">{{ 'cart.items_count' | t: count: cart.item_count }}</span>

  <form action="{{ routes.cart_url }}" method="post" novalidate class="cart" id="cart">

    <div class="cart-holder" data-items="{{ cart.items.size }}">

      <div class="cart-items">

        {%- for item in cart.items -%}

        <div class="cart-item" data-title="{{ item.product.title | escape }} {%- unless item.product.has_only_default_variant -%} ({{ item.variant.title | escape }}) {%- endunless -%}" data-id="{{ item.key }}" data-variant="{{ item.variant.id }}" data-qty="{{ item.quantity }}">

            <div>

              <a href="{{ item.url | within: collections.all }}" class="thumbnail">
                <figure class="lazy-image {% if item.image.src contains 'png' %} lazy-image--transparent {% endif %}" data-ratio style="padding-top: 130%">
                  <img 
                    src="{{ item.image | image_url: width: 100, height: 130, crop: 'center' }}" alt="{{ item.title | escape }}"
                    srcset="{{ item.image | image_url: width: 100, height: 130, crop: 'center' }} 100w, {{ item.image | image_url: width: 200, height: 260, crop: 'center' }} 260w"
                    sizes="100px" class="img lazy"
                    loading="lazy"
                    width="{{ item.image.width }}" height="{{ item.image.height }}"
                  />
                </figure>
              </a>

              <div class="content">

                <a href="{{ item.url }}">
                  <span class="title">{{ item.product.title | escape }}</span>
                  {%- unless item.product.has_only_default_variant -%}
                    <span class="info variant-title">({{ item.variant.title | escape }})</span>
                  {%- endunless -%}
                </a>

                {%- if item.selling_plan_allocation -%}
                  <span class="info selling-plan">
                    {{ item.selling_plan_allocation.selling_plan.name }} 
                  </span>
                {%- endif -%}
            
                <div class="price">

                  <div class="item__price-list">

                    {%- if item.final_line_price < item.original_line_price -%}
                      <span class="item__price">{{ item.final_line_price | money }}</span>
                      <span class="item__price item__price--compare">{{ item.original_line_price | money }}</span>
                    {%- elsif item.variant.compare_at_price > item.variant.price -%}
                      <span class="item__price">{{ item.final_line_price | money }}</span>
                      <span class="item__price item__price--compare">{{ item.variant.compare_at_price | times: item.quantity | money }}</span>
                    {%- else -%}
                      <span class="item__price">{{ item.final_line_price | money }}</span>
                    {%- endif -%}

                    {%- if item.quantity > 1 and type == 'page' -%}
                      <span class="info quantity-extra" style="margin-top:3px">({{ item.quantity }} x {{ item.final_price | money }})</span>
                    {%- endif -%}
                    
                  </div>

                  {%- if item.unit_price_measurement -%}
                    <span class="item__unit">
                      {{ item.unit_price | money }} / 
                      {%- if item.unit_price_measurement.reference_value != 1 -%}
                        {{ item.unit_price_measurement.reference_value }}
                      {%- endif -%}
                      {{ item.unit_price_measurement.reference_unit }}
                    </span>
                  {%- endif -%}

                </div>

                 {%- if item.line_level_discount_allocations.size > 0 -%}
                  {%- for discount_allocation in item.line_level_discount_allocations -%}
                    <small class="discount">{{ 'cart.discount' | t }} <span style="display: inline-block">{{ discount_allocation.discount_application.title }} <span style="display: inline-block">(-{{ discount_allocation.amount | money | strip }})</span></span></small>
                  {% endfor %}
                {%- endif -%}

                <div class="item__properties">
                  {%- for p in item.properties -%}
                    {%- assign property_first_char = p.first | slice: 0 -%}
                    <div class="item__property {% if property_size == 0 or p.last == blank or property_first_char == '_' %} hide {% endif %}">
                      <span class="item__propety-label">{{ p.first }}:</span>
                      <span class="item__property-value">
                        {%- if p.last contains '/uploads/' -%}
                          <a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
                        {%- else -%}
                          {{ p.last }}
                        {%- endif -%}
                      </span>
                    </div>
                  {%- endfor -%}
                </div>
                <div class="quant-selector">
                {%- if settings.cart_quantity_selector -%}
                  
                  <a  class="less" data-variantid="{{ item.id }}" href="javascript:void(0)"><img src="https://cdn.shopify.com/s/files/1/0555/4018/7214/files/39384297500c145afa524e1721a04663.svg?v=1650276446"></a>
                   <input  class="qty" type="number" name="updates[]"  value="{{ item.quantity }}" min="0" aria-label="{{ 'product.page.quantity' | t }}">
                  <a  class="more" data-variantid="{{ item.id }}" href="javascript:void(0)"><img src="https://cdn.shopify.com/s/files/1/0555/4018/7214/files/18dddcc9cf53b547eaf0f76c308502f6_e2c6dbb9-0564-4b89-be39-282da393cb9c.svg?v=1650276446"></a>
                  {%- endif -%}
                </div>

               
              </div>

            </div>

            <div class="actions">
              
              <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&amp;quantity=0" class="remove" title="{{ 'cart.remove_item' | t }}" aria-label="{{ 'cart.remove_item' | t }}"><span aria-hidden="true">{% render 'theme-symbols', icon: 'close' %}</span></a>
            </div>

          </div>

        {%- endfor -%}
   
   {%- assign lipstickCount = 0 -%}

{%- for item in cart.items -%}
  {% if item.title contains 'lipstick' %}
    {%- assign lipstickCount = lipstickCount | plus: item.quantity -%}
  {% endif %}
{%- endfor -%}

{%- if lipstickCount == 1 -%}
  <p>Add one more.</p>
{%- elsif lipstickCount >= 2 -%}
  <!-- No need to display any text, you can add specific logic here if required -->
{%- endif -%}
      </div>

    </div>

  </form>

  <span class="cart__count hidden" aria-hidden="true" data-cart-count>{{ cart.item_count }}</span>

</cart-form>
<style>
  .quant-selector .qty{
 padding: 0;
    margin: 0;
    border: none;
   
    width: 37px;
    height: 19px;
    text-align: center;
    font-size: 12px;
  }
  .quant-selector{
  display: flex;
    align-items: center;
  }
  .quant-selector a{
  width: 19px;
height: 19px;
    border: 0.75px solid #FF8F1A;
    display: flex;
    align-items: center;
    justify-content: center;

  }
  .thumbnail{
  width: 175px!important;
  }
  .title{
  font-family: Inter;
font-style: italic;
font-weight: 600!important;
font-size: 1.6vw;
    width: 80%;
line-height: 132.19%!important;
margin-bottom: 11px;
letter-spacing: 0.05em;
text-transform: uppercase;

color: #000;
  }
  .color-opt{
  display: flex!important;
    align-items: center;
  }
  .price{
margin-bottom: 30px!important;
  }
  @media only screen and (max-width: 769px) {
 .title {
    font-family: Inter;
    font-style: italic;
    font-weight: 900!important;
    font-size: 5vw;
  }
}
  .color-opt{
  color: #FF3FB5!important;
    font-size: 14px!important;
    font-style: normal;
    text-transform: capitalize;
  }
  .lipstick-message, .eyeshadow-message{
        margin-top: 1rem;
    margin-bottom: 0;
    font-weight: bolder;
    color: #fd1ebf;
  }
</style>
<!-- <script>
  // Function to count lipsticks in the cart
  function countLipsticks(cart) {
    var lipstickCount = 0;

    cart.items.forEach(function (item) {
      var title = item.title.toLowerCase();
      if (title.includes('lipstick')) {
        lipstickCount += item.quantity;
      }
    });

    return lipstickCount;
  }

  // Function to count eyeshadow sticks in the cart
  function countEyeshadows(cart) {
    var eyeshadowCount = 0;

    cart.items.forEach(function (item) {
      var title = item.title.toLowerCase();
      if (title.includes('eyeshadow stick')) {
        eyeshadowCount += item.quantity;
      }
    });

    return eyeshadowCount;
  }

  // Function to update the text inside the cart-form
  function updateTextInsideCartForm(lipstickText, eyeshadowText) {
    var cartFormElement = document.getElementById("AjaxCartForm");
    var lipstickMessageElement = cartFormElement.querySelector(".lipstick-message");
    var eyeshadowMessageElement = cartFormElement.querySelector(".eyeshadow-message");

    if (!lipstickMessageElement) {
      // Create a new paragraph element for lipstick message if it doesn't exist
      lipstickMessageElement = document.createElement("p");
      lipstickMessageElement.className = "lipstick-message";
      cartFormElement.appendChild(lipstickMessageElement);
    }

    if (!eyeshadowMessageElement) {
      // Create a new paragraph element for eyeshadow message if it doesn't exist
      eyeshadowMessageElement = document.createElement("p");
      eyeshadowMessageElement.className = "eyeshadow-message";
      cartFormElement.appendChild(eyeshadowMessageElement);
    }

    // Update the text content of the message elements
    lipstickMessageElement.textContent = lipstickText;
    eyeshadowMessageElement.textContent = eyeshadowText;
  }

  // Function to update the text every second
  function updateTextEverySecond() {
    // Fetch the cart data from Shopify's AJAX API
    fetch('/cart.js')
      .then(function (response) {
        return response.json();
      })
      .then(function (data) {
        // Count lipsticks and eyeshadow sticks in the cart
        var lipstickCount = countLipsticks(data);
        var eyeshadowCount = countEyeshadows(data);

        // Generate the text to display based on lipstick and eyeshadow counts
        var lipstickText = '';
        var eyeshadowText = '';

        if (lipstickCount === 1) {
          lipstickText += 'Add one more lipstick to get a free lipstick.';
        }

        if (eyeshadowCount === 1) {
          eyeshadowText += 'Add one more eyeshadow stick to get a free eyeshadow stick.';
        }

        // Update the text inside the cart-form
        updateTextInsideCartForm(lipstickText, eyeshadowText);
      })
      .catch(function (error) {
        console.error('Error fetching cart data:', error);
      });
  }

  // Call the update function every second (1000 milliseconds)
  setInterval(updateTextEverySecond, 1000);
</script> -->

